{"componentChunkName":"component---src-templates-example-js","path":"/retry/","webpackCompilationHash":"4c97b8867ce8cc5e8d2c","result":{"data":{"site":{"siteMetadata":{"title":"Istio By Example","author":"Megan O'Keefe"}},"markdownRemark":{"id":"8a963604-6576-5ba5-b3b5-ad7ce065442e","excerpt":"Microservices architectures are distributed. This means more requests on the network, increasing the chance of transient failures like network congestion…","html":"<p>Microservices architectures are distributed. This means more requests on the network, increasing the chance of transient failures like network congestion.</p>\n<p>Adding retry policies for requests helps build resiliency in a services architecture. Often, this retry logic is <a href=\"https://upgear.io/blog/simple-golang-retry-function/\">built into source code</a>. But with Istio, you can define retry policies <a href=\"https://istio.io/docs/concepts/traffic-management/#set-number-and-timeouts-for-retries\">with a traffic rule</a>, offloading this logic to your services’ <a href=\"https://istio.io/docs/concepts/what-is-istio/#architecture\">sidecar proxies</a>. This can help you standardize around the same policies across many services, protocols, and programming languages.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d04b1ed50b6173e601a8aeca559a7d52/8ddd4/retry.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.16132167152575%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAJnKAACZygHjkaQiAAABZUlEQVQoz32S3W6bQBCFef/nSq9ykTZpqmCTpI6htvkRGMdml92drwMEo6pRVhrtMDp7mDNnIr44IjLGUmD5ls/fRCJBQe4aQSwhWM17RGbSmWjOB6ydsNe3A94TuVDQh53GHhdyPA2BVvNSwe9La1eynp4DXhrF1oot9D4w80Q2vGoh00KFYYOvz5iHWgkcna3pOmhPgg+TxoDFnQouNzm2zmkuK94vKb2kE6HxCcnLT9ZxipE9XZxh1jV2k5NVLesEfsXC762QFxBvHH++raHqaX488vh0xyrefnSYDYTPtOct1nTa0w6T5HR3FX2hsjmyTWGfi/5U+P6AdtTTrt4wtyXn5IVdeU+axRj/OktWMnnChhUmJDivZCrJMcywUbnaTC0cCqGsBtFGR1TiipOad9HJNlrTeUo7EQ7OTE5/hFKNMbomn5gSVN5gyHE0xoXjGF6OI2n0//L9u2PL2iz5V3v4F0PYvBQdYfR+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diagram\"\n        title=\"Diagram\"\n        src=\"/static/d04b1ed50b6173e601a8aeca559a7d52/b9e4f/retry.png\"\n        srcset=\"/static/d04b1ed50b6173e601a8aeca559a7d52/cf440/retry.png 148w,\n/static/d04b1ed50b6173e601a8aeca559a7d52/d2d38/retry.png 295w,\n/static/d04b1ed50b6173e601a8aeca559a7d52/b9e4f/retry.png 590w,\n/static/d04b1ed50b6173e601a8aeca559a7d52/f9b6a/retry.png 885w,\n/static/d04b1ed50b6173e601a8aeca559a7d52/2d849/retry.png 1180w,\n/static/d04b1ed50b6173e601a8aeca559a7d52/8ddd4/retry.png 5145w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span></p>\n<p>In this example, all inbound requests to the <code class=\"language-text\">helloworld</code> service try 5 times, and an attempt is marked as failed if it takes longer than 2 seconds to complete.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> DestinationRule\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> helloworld\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> helloworld\n  <span class=\"token key atrule\">subsets</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> v1\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> v1</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> VirtualService\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> helloworld\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> helloworld\n  <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">route</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> helloworld\n        <span class=\"token key atrule\">subset</span><span class=\"token punctuation\">:</span> v1\n    <span class=\"token key atrule\">retries</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">attempts</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n      <span class=\"token key atrule\">perTryTimeout</span><span class=\"token punctuation\">:</span> 2s</code></pre></div>","frontmatter":{"title":"retry policy","date":"May 01, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/retry/","previous":null,"next":{"fields":{"slug":"/canary/"},"frontmatter":{"title":"canary deployment"}}}}}