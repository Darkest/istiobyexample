{"componentChunkName":"component---src-templates-example-js","path":"/mtls/","webpackCompilationHash":"4c97b8867ce8cc5e8d2c","result":{"data":{"site":{"siteMetadata":{"title":"Istio By Example","author":"Megan O'Keefe"}},"markdownRemark":{"id":"64427185-e666-5963-9af6-77d5d111b17d","excerpt":"A microservices architecture means more requests on the network, and more opportunities for malicious parties to intercept traffic. Mutual TLS (mTLS…","html":"<p>A microservices architecture means more requests on the network, and more opportunities for malicious parties to intercept traffic. <a href=\"https://en.wikipedia.org/wiki/Mutual_authentication\">Mutual TLS</a> (mTLS) authentication is a way to encrypt services traffic using <a href=\"https://www.internetsociety.org/deploy360/tls/basics/\">certificates</a>.</p>\n<p>With Istio, you can automate the enforcement of mTLS across all services. Below, we enable mTLS for the entire mesh. Two pods in the cluster, <code class=\"language-text\">client</code> and <code class=\"language-text\">server</code>, are shown establishing a secure connection with the mTLS policy in place.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4023fdf6c75d10290a6dd65f63b7471e/3e8e9/mtls.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.11169170476813%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAJnKAACZygHjkaQiAAABQElEQVQoz4WRXU/jMBBF8/9/Eu+LQLuiBR7QlhIKTQtNGyf+jB0nPrjhCQnBSFdjWbrHcz0Fv1T65jxNE0MYGYaRGM+aZqWUKJwbaBpL1/WfXUW6g6EVnt42meJIYUfqV+DumcI7rYxI7bMG2i5kr+N4NDOjEMKx3bZUVUf5LPCyxv6tUKsKKR7B/iOZG5K9B3NN1Eu6astYdvkhzamuOTU9+51kl1W0rWO9PrFaHXnN0EksCIsd/cMC061BX5H0NcmX0D8ymUvU8oLhSRDKOzZPS8pSsdk081AzcL+XSNlT1xo/QDharErIepkhdxlW5eT/58gxNIh3g1vnNC7RtB6tPIeD5u1NUYzjhDEBlS+1zl06pPEoHYnyT458O8OSfyFFMS/F5n+X9uzps8fP3vNA3keKX7ec4pctnzf5U30ADZwaIEs3XGIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Diagram\"\n        title=\"Diagram\"\n        src=\"/static/4023fdf6c75d10290a6dd65f63b7471e/b9e4f/mtls.png\"\n        srcset=\"/static/4023fdf6c75d10290a6dd65f63b7471e/cf440/mtls.png 148w,\n/static/4023fdf6c75d10290a6dd65f63b7471e/d2d38/mtls.png 295w,\n/static/4023fdf6c75d10290a6dd65f63b7471e/b9e4f/mtls.png 590w,\n/static/4023fdf6c75d10290a6dd65f63b7471e/f9b6a/mtls.png 885w,\n/static/4023fdf6c75d10290a6dd65f63b7471e/2d849/mtls.png 1180w,\n/static/4023fdf6c75d10290a6dd65f63b7471e/3e8e9/mtls.png 6124w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> authentication.istio.io/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> MeshPolicy\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> default\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">peers</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mtls</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> STRICT</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> DestinationRule\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> default\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"*.local\"</span>\n  <span class=\"token key atrule\">trafficPolicy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">tls</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> ISTIO_MUTUAL</code></pre></div>\n<p>Here, a <code class=\"language-text\">MeshPolicy</code> enforces TLS for all services <em>receiving</em> requests (server-side), and a <code class=\"language-text\">DestinationRule</code> enforces TLS for all services <em>sending</em> requests (client-side), resulting in mutual (“both”) TLS.</p>\n<p><strong>Authentication Flow:</strong></p>\n<ol>\n<li><code class=\"language-text\">client</code> application container sends a plain-text HTTP request to <code class=\"language-text\">server</code>.</li>\n<li><code class=\"language-text\">client</code> proxy container intercepts the outbound request.</li>\n<li><code class=\"language-text\">client</code> proxy performs a TLS <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFKSJ_7.1.0/com.ibm.mq.doc/sy10660_.htm\">handshake</a> with the server-side proxy. This handshake includes an exchange of certificates. These certs are pre-loaded into the proxy containers by Istio.</li>\n<li><code class=\"language-text\">client</code> proxy performs a <a href=\"https://istio.io/docs/concepts/security/#secure-naming\">secure naming</a> check on the server’s certificate, verifying that an authorized identity is running the <code class=\"language-text\">server</code>.</li>\n<li><code class=\"language-text\">client</code> and <code class=\"language-text\">server</code> establish a mutual TLS connection, and the <code class=\"language-text\">server</code> proxy forwards the request to the <code class=\"language-text\">server</code> application container.</li>\n</ol>\n<p><strong>Learn more</strong>:</p>\n<ul>\n<li><a href=\"https://istio.io/docs/concepts/security/#authentication\">Istio Docs - Authentication</a></li>\n<li><a href=\"https://github.com/GoogleCloudPlatform/istio-samples/tree/77fb1dfb690d28517e410df2911e255d54e3450e/security-intro#authentication\">Samples: Authentication</a></li>\n<li><a href=\"https://istio.io/docs/tasks/security/authn-policy/\">Task - Authentication Policies</a></li>\n<li><a href=\"https://istio.io/docs/tasks/security/mutual-tls/\">Task - Mutual TLS Deep-Dive</a></li>\n<li><a href=\"https://istio.io/faq/security/#enabling-disabling-mtls\">FAQ - mTLS</a></li>\n</ul>","frontmatter":{"title":"mutual tls","date":"May 01, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/mtls/","previous":null,"next":{"fields":{"slug":"/secure-ingress/"},"frontmatter":{"title":"secure ingress"}}}}}