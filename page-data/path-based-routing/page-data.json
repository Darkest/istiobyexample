{"componentChunkName":"component---src-templates-example-js","path":"/path-based-routing/","webpackCompilationHash":"4c97b8867ce8cc5e8d2c","result":{"data":{"site":{"siteMetadata":{"title":"Istio By Example","author":"Megan O'Keefe"}},"markdownRemark":{"id":"76a87af5-4e94-5c9e-bde8-7779149b7e94","excerpt":"Istio and Envoy work at the Application traffic layer (L7), allowing you to direct and load-balance traffic based on attributes like HTTP headers. This exampleâ€¦","html":"<p>Istio and <a href=\"https://istio.io/docs/concepts/what-is-istio/#envoy\">Envoy</a> work at the Application traffic layer (L7), allowing you to direct and load-balance traffic based on attributes like HTTP headers. This example shows how to direct traffic <a href=\"https://istio.io/docs/concepts/traffic-management/#match-request-uri\">based on the request URI</a> path.</p>\n<p>In this example, <code class=\"language-text\">myapp</code> is the server backend for a website, used by the <code class=\"language-text\">frontend</code>. An engineering team has implemented a new user authentication service, <code class=\"language-text\">auth</code>, which now operates as a separate service.</p>\n<p>Using an Istio <a href=\"https://istio.io/docs/reference/config/networking/v1alpha3/virtual-service/#HTTPMatchRequest\">match rule</a>, we redirect any request with the <code class=\"language-text\">/login</code> prefix to the new <code class=\"language-text\">auth</code> service, and direct all other <code class=\"language-text\">myapp</code> requests to the existing backend.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/549fa78eb8e1f4245156becb55891d6c/4b018/urimatch.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.709009153685564%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAJnKAACZygHjkaQiAAABwElEQVQoz32TCVPbMBCF8///VWc6HShlSsnVAgnEIbaxY/mWLUvy1w2loVyVZ2e9Op7evl1N+GCM43j0b8xbRp7MO5k7mH9cm7x74Gj+3cucK+i3ASaLMe2KvrqhL3/hhorJ+/RehrZXDDrE2xZrEprdCf1C0c0jOrWQtXtMvZZ9GZPa1URDSDxEZC4jN4rMy2Yvh9sdOp/SpifiLzFNICz2dLEw+pmhpyE6vhCg5BnwADbrpgQ24K5Yoc9Cyr0iUKd06Sn0AaNrhLV7Ttkqmd5goh1GrzGSsqmu/qQc25gv9Wdmbs5yeQ7BQL2MuMkDvi5i5hvRaxjxIoP3/qkoDicFsaMVPeVfYu/do1aTQ6rn7TeWZsm6uKa7fCAPYyr5us4zv0v59GPL9DY9Mixaw15p8saQlpqk0MSqRfeWSeMbEpuwtyn5mFNIBZV47fQRoB8cm4eSTVyijRWwluZ7jN6WLLaK26jgcp2iqu5Vlce3vejH8QXwSoBPzzb4m5xqljC7euA6zLlYJeR1//8+/HvLyxiirKEQsGqTE6Q14b7h6l6h6u6DPnzF8t9XcxitaKW0oewHsrJ71C+TdAfr+Q3Af1DuJHpbcwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"URI Match with Istio\"\n        title=\"URI Match with Istio\"\n        src=\"/static/549fa78eb8e1f4245156becb55891d6c/b9e4f/urimatch.png\"\n        srcset=\"/static/549fa78eb8e1f4245156becb55891d6c/cf440/urimatch.png 148w,\n/static/549fa78eb8e1f4245156becb55891d6c/d2d38/urimatch.png 295w,\n/static/549fa78eb8e1f4245156becb55891d6c/b9e4f/urimatch.png 590w,\n/static/549fa78eb8e1f4245156becb55891d6c/f9b6a/urimatch.png 885w,\n/static/549fa78eb8e1f4245156becb55891d6c/2d849/urimatch.png 1180w,\n/static/549fa78eb8e1f4245156becb55891d6c/4b018/urimatch.png 6227w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> VirtualService\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> auth<span class=\"token punctuation\">-</span>redirect\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> myapp\n  <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">match</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">prefix</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/login\"</span>\n    <span class=\"token key atrule\">route</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> auth\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">route</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> myapp</code></pre></div>","frontmatter":{"title":"path-based routing","date":"May 01, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/path-based-routing/","previous":null,"next":{"fields":{"slug":"/mtls/"},"frontmatter":{"title":"mutual tls"}}}}}