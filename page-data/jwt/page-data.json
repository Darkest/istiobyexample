{"componentChunkName":"component---src-templates-example-js","path":"/jwt/","webpackCompilationHash":"4c97b8867ce8cc5e8d2c","result":{"data":{"site":{"siteMetadata":{"title":"Istio By Example","author":"Megan O'Keefe"}},"markdownRemark":{"id":"d2fc047d-d5fa-5c7d-ba75-df81889c3f5c","excerpt":"A JSON Web Token (JWT) is a type of authentication token used to identify a user to a server application. JWTs contain information about the client caller, and…","html":"<p>A <a href=\"https://jwt.io/introduction/\">JSON Web Token</a> (JWT) is a type of authentication token used to identify a user to a server application. JWTs contain information about the client caller, and can be used as part of a client session architecture. A <a href=\"https://auth0.com/docs/jwks\">JSON Web Key Set</a> (JWKS) contains the cryptographic keys used to verify incoming JWTs.</p>\n<p>You can use Istio’s <a href=\"https://istio.io/docs/reference/config/istio.authentication.v1alpha1/#Jwt\">Authentication API</a> to <a href=\"https://istio.io/docs/concepts/security/#origin-authentication\">configure JWT policies</a> for your services.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29ed7235f86b47337cbda24bc10ac9bd/700db/jwt.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.64447317388494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAJnKAACZygHjkaQiAAABfElEQVQoz32S207bQBRF/e2ID6hEqFSpP1BV4qGv5amioik8VFRUuSAlLokdZ4gdO75hz5zFYAdwCulIW+cizd7n5vCfJyINun4Ty27chfNWsiF4/MUL2b9CW+9VEc6+ytgRENJSNzCmJalrsQBtrdYtnisMw5BFEKACxTqKn7UbbIu4uas5HaZcL0qKTNisrUhkSDeQWBsqQ5ZYwqqo6Y9/cJJ84oM64ufNOVQxUvlIHSGmtHQFcZLgX86IVMYmh9JVVEOXcJ4TzA3ziSaYaRxdaS5Gfb6sP/MxeM/Z4CvkEyS/RkoXuZ/bvjz09Jz6doWe3FJEY/Lf39DukKD/i5mrmQ40/l9L6Ps+x71jDg8O6b3rMRqNd1vezlVnFdmfBZUXkqbW9wryYchqlnIXCN5UozyDk9hWlsslSqlmlk/bEzHtALubt900C6kgW03JwwFZnBLbb+uV4b6U11t+6/a6p9IaK1Zcwea7TSQ7J7T/DveRNvFT8dKxLR4AvPcEvB1yW9UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"jwt\"\n        title=\"jwt\"\n        src=\"/static/29ed7235f86b47337cbda24bc10ac9bd/b9e4f/jwt.png\"\n        srcset=\"/static/29ed7235f86b47337cbda24bc10ac9bd/cf440/jwt.png 148w,\n/static/29ed7235f86b47337cbda24bc10ac9bd/d2d38/jwt.png 295w,\n/static/29ed7235f86b47337cbda24bc10ac9bd/b9e4f/jwt.png 590w,\n/static/29ed7235f86b47337cbda24bc10ac9bd/f9b6a/jwt.png 885w,\n/static/29ed7235f86b47337cbda24bc10ac9bd/2d849/jwt.png 1180w,\n/static/29ed7235f86b47337cbda24bc10ac9bd/700db/jwt.png 6188w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </a>\n    </span></p>\n<p>In this example, we require a JWT for all routes in the <code class=\"language-text\">frontend</code> service except for the home page (<code class=\"language-text\">/</code>) and the pod health check (<code class=\"language-text\">/_healthz</code>).</p>\n<p>In the Istio policy, we specify the path to a test public key (<code class=\"language-text\">jwksUri</code>), which will be mounted into the frontend’s sidecar proxy. All unauthenticated requests will receive a <code class=\"language-text\">401 - Unauthorized</code> status from Envoy.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"authentication.istio.io/v1alpha1\"</span>\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Policy\"</span>\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"frontend-jwt\"</span>\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">targets</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> frontend\n  <span class=\"token key atrule\">origins</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">jwt</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">issuer</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"testing@secure.istio.io\"</span>\n      <span class=\"token key atrule\">jwksUri</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://raw.githubusercontent.com/istio/istio/release-1.2/security/tools/jwt/samples/jwks.json\"</span>\n      <span class=\"token key atrule\">trigger_rules</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">excluded_paths</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">exact</span><span class=\"token punctuation\">:</span> /_healthz\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">exact</span><span class=\"token punctuation\">:</span> /\n  <span class=\"token key atrule\">principalBinding</span><span class=\"token punctuation\">:</span> USE_ORIGIN</code></pre></div>\n<p>To learn more and try interactive examples, see the <a href=\"https://istio.io/docs/tasks/security/authn-policy/#end-user-authentication\">Istio docs</a> and the <a href=\"https://github.com/GoogleCloudPlatform/istio-samples/tree/master/security-intro#add-end-user-jwt-authentication\">istio-samples repo</a>.</p>","frontmatter":{"title":"jwt","date":"May 01, 2015"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/jwt/","previous":null,"next":{"fields":{"slug":"/load-balancing/"},"frontmatter":{"title":"load balancing"}}}}}